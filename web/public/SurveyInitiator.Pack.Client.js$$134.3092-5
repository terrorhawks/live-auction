function Process180(){Process180.prototype.tools={now:function(){return new Date},addEvent:function(C,A,B){if(document.addEventListener){C.addEventListener(A,B,false)}else{if(document.attachEvent){C.attachEvent("on"+A,B)}else{C.setAttribute("on"+A,B)}}},queryString:function(A){hu=window.location.search.substring(1).toLowerCase();gy=hu.split("&");for(i=0;i<gy.length;i++){ft=gy[i].split("=");if(ft[0]==A){return ft[1]}}return null},addToQuery:function(B,D,C){B=B.toLowerCase();var A=B.replace(/(\?|&)_=.*?(&|$)/,"$1"+D.toLowerCase()+"="+C+"$2");B=A+((A===B)?(/\?/.test(B)?"&":"?")+D.toLowerCase()+"="+C:"");return B},probabilityCheck:function(C){if(C!=null){var A=C.split("/");var B=Math.floor((Math.random()*parseInt(A[1],10))+1);this.logMessage("probabilityCheck: {"+C+"} ~~ "+B+" > "+parseInt(A[0],10)+"="+(B>parseInt(A[0],10)));if(B>parseInt(A[0],10)){return false}}return true},logMessage:function(A){try{if(console!=null){console.log(A)}}catch(B){}}};Process180.prototype.cookie={readCookie:function(B){var D=B+"=";var A=document.cookie.split(";");for(var C=0;C<A.length;C++){var E=A[C];while(E.charAt(0)==" "){E=E.substring(1,E.length)}if(E.indexOf(D)==0){return E.substring(D.length,E.length)}}return null}};Process180.prototype.FetchScript={get:function(A){var B=Process180.tools.now().getTime();A=Process180.tools.addToQuery(A,"_",B);var C=document.createElement("script");C.setAttribute("type","text/javascript");C.setAttribute("src",A);document.getElementsByTagName("head").item(0).appendChild(C)}};Process180.prototype.GetSurveyInitiator=function(B,C,A){B=B.toLowerCase();Process180.tools.logMessage("SurveyInitiator:"+B);if(Process180.cookie.readCookie(B)=="true"){Process180.tools.logMessage("Has cookie, no message");return }if(A){if(Process180.tools.probabilityCheck(C)){Process180.tools.logMessage("Fetch Message");Process180.FetchScript.get(process180_sih+"/getSettings.aspx?IncludeInitiatorScript=true&ClientCode="+escape(B)+"&SurveysViewed="+escape(Process180.cookie.readCookie("SurveysViewed")))}}else{Process180.tools.addEvent(window,"load",function(){Process180.tools.logMessage("Message load event fired");if(Process180.tools.probabilityCheck(C)){Process180.tools.logMessage("Fetch Message");Process180.FetchScript.get(process180_sih+"/getSettings.aspx?IncludeInitiatorScript=true&ClientCode="+escape(B)+"&SurveysViewed="+escape(Process180.cookie.readCookie("SurveysViewed")))}})}}}window.Process180=new Process180();